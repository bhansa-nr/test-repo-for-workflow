/*! For license information please see newrelic-video-dash.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.nrvideo=t():e.nrvideo=t()}(self,(()=>(()=>{"use strict";var e={954:(e,t,i)=>{var s,n=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=r(t);if(i&&i.has(e))return i.get(e);var s={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&{}.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(s,a,o):s[a]=e[a]}return s.default=e,i&&i.set(e,s),s}(i(851)),a=(s=i(302))&&s.__esModule?s:{default:s};function r(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(r=function(e){return e?i:t})(e)}n.DashTracker=a.default,e.exports=n},302:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=a(t);if(i&&i.has(e))return i.get(e);var s={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&{}.hasOwnProperty.call(e,r)){var o=n?Object.getOwnPropertyDescriptor(e,r):null;o&&(o.get||o.set)?Object.defineProperty(s,r,o):s[r]=e[r]}return s.default=e,i&&i.set(e,s),s}(i(851)),n=i(330);function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(a=function(e){return e?i:t})(e)}class r extends s.VideoTracker{setPlayer(e,t){s.VideoTracker.prototype.setPlayer.call(this,e,t)}getTrackerName(){return"dash"}getTrackerVersion(){return n.version}isLive(){return this.player.isDynamic()}getSrc(){return this.player.getSource()}getPlayrate(){return this.player.getPlaybackRate()}getDuration(){return this.player.duration()}getTrack(){return this.player.getCurrentTrackFor("audio")}getLanguage(){return this.getTrack().lang??""}getDashBitrate(e){const t=this.player.getQualityFor("video");return this.player.getBitrateInfoListFor("video")[t]}getRenditionBitrate(){const e=this.getDashBitrate("video");return e?.bitrate}getRenditionWidth(){return this.getDashBitrate("video")?.width}getRenditionHeight(){return this.getDashBitrate("video")?.height}getPlayerVersion(){return this.player.getVersion()}getPreload(){return this.player.preload()}isMuted(){return this.player.isMuted()}isAutoplayed(){return this.player.getAutoPlay()}registerListeners(){s.Log.debugCommonVideoEvents(this.player,[null,"streamInitialized","playbackMetaDataLoaded","playbackLoadedData","canPlay","playbackPlaying","playbackPaused","playbackSeeking","playbackSeeked","error","playbackEnded","bufferStalled","bufferLoaded","qualityChangeRendered"]),this.player.on("streamInitialized",this.onReady.bind(this)),this.player.on("playbackMetaDataLoaded",this.onDownload.bind(this)),this.player.on("playbackLoadedData",this.onDownload.bind(this)),this.player.on("canPlay",this.onPlay.bind(this)),this.player.on("playbackPlaying",this.onPlaying.bind(this)),this.player.on("playbackPaused",this.onPause.bind(this)),this.player.on("playbackSeeking",this.onSeeking.bind(this)),this.player.on("playbackSeeked",this.onSeeked.bind(this)),this.player.on("error",this.onError.bind(this)),this.player.on("playbackError",this.onError.bind(this)),this.player.on("playbackEnded",this.onEnded.bind(this)),this.player.on("bufferStalled",this.onBufferingStalled.bind(this)),this.player.on("bufferLoaded",this.onBufferingLoaded.bind(this)),this.player.on("qualityChangeRendered",this.onAdaptation.bind(this))}unregisterListeners(){this.player.off("streamInitialized",this.onReady),this.player.off("playbackMetaDataLoaded",this.onDownload),this.player.off("playbackLoadedData",this.onDownload),this.player.off("canPlay",this.onPlay),this.player.off("playbackPlaying",this.onPlaying),this.player.off("playbackPaused",this.onPause),this.player.off("playbackSeeking",this.onSeeking),this.player.off("playbackSeeked",this.onSeeked),this.player.off("playbackError",this.onError),this.player.off("error",this.onError),this.player.off("playbackEnded",this.onEnded),this.player.off("bufferStalled",this.onBufferingStalled),this.player.off("bufferLoaded",this.onBufferingLoaded),this.player.off("qualityChangeRendered",this.onAdaptation)}onReady(){this.sendPlayerReady()}onDownload(e){this.sendDownload({state:e.type})}onPlay(){this.sendRequest()}onPlaying(){this.sendResume(),this.sendStart()}onAdaptation(){this.sendRenditionChanged()}onBufferingStalled(){this.sendBufferStart()}onBufferingLoaded(){this.sendBufferEnd()}onPause(){this.sendPause()}onSeeking(){this.sendSeekStart()}onSeeked(){this.sendSeekEnd()}onError(e){this.sendError(e.error.message)}onEnded(){this.sendEnd()}}t.default=r},851:(e,t,i)=>{i.r(t),i.d(t,{Backend:()=>s,Chrono:()=>A,Constants:()=>E,Core:()=>T,Emitter:()=>y,Log:()=>d,NRInsightsBackend:()=>l,Tracker:()=>_,VideoTracker:()=>B,VideoTrackerState:()=>b,version:()=>R.rE});const s=class{constructor(){this._attributes={}}send(e,t){t=Object.assign(t||{},this._attributes)}setAttribute(e,t){this._attributes[e]=t}setAttributes(e){this._attributes.append(e)}};class n{static error(...e){a(e,n.Levels.ERROR,"darkred")}static warn(...e){a(e,n.Levels.WARNING,"darkorange")}static notice(...e){a([].slice.call(arguments),n.Levels.NOTICE,"darkcyan")}static debug(...e){a(e,n.Levels.DEBUG,"indigo")}static debugCommonVideoEvents(e,t,i){try{if(n.level<=n.Levels.DEBUG){i=i||function(e){n.debug("Event: "+e.type)};var s=["canplay","buffering","waiting","ended","play","playing","pause","resume","error","abort","seek","seeking","seeked","stalled","dispose","loadeddata","loadstart","loadedmetadata"];t&&(null===t[0]?(t.shift(),s=t):s=s.concat(t));for(var a=0;a<s.length;a++)"function"==typeof e?e.call(window,s[a],i):e.on?e.on(s[a],i):e.addEventListener?e.addEventListener(s[a],i):e.addEventHandler?e.addEventHandler(s[a],i):n.warn("debugCommonVideoEvents: No common listener function found for ",e)}}catch(e){n.warn(e)}}}function a(e,t,i){t=t||n.Levels.NOTICE,i=i||"darkcyan";var s,a,d=n.prefix;n.includeTime&&(d+="["+("0"+(s=new Date).getDate()).slice(-2)+":"+("0"+s.getMinutes()).slice(-2)+":"+("0"+s.getSeconds()).slice(-2)+"."+("00"+s.getMilliseconds()).slice(-3)+"] "),d+=function(e){return o[e]}(t)+":",n.level<=t&&t!==n.Levels.SILENT&&(!n.colorful||"undefined"!=typeof document&&document.documentMode?r(e,d):(a=t===n.Levels.ERROR&&console.error?console.error:t===n.Levels.WARNING&&console.warn?console.warn:t===n.Levels.DEBUG&&console.debug&&null==window.cast?console.debug:console.log,d="%c"+d,e.splice(0,0,d,"color: "+i),a.apply(console,e)))}function r(e,t){if(e instanceof Array)for(var i in e)r(e[i],t);else"string"==typeof e?console.log(t+" "+e):(console.log(t+"â†µ"),console.log(e))}n.Levels={SILENT:5,ERROR:4,WARNING:3,NOTICE:2,DEBUG:1,ALL:0},n.level=n.Levels.ERROR,n.colorful=!0,n.includeTime=!0,n.prefix="[nrvideo]";const o={4:"e",3:"w",2:"n",1:"d"};!function(){if("undefined"!=typeof window&&window.location&&window.location.search){var e=/\?.*&*nrvideo-debug=(.+)/i.exec(window.location.search);null!==e&&("true"===e[1]?n.level=n.Levels.ALL:n.level=e[1]),null!==/\?.*&*nrvideo-colors=false/i.exec(window.location.search)&&(n.colorful=!1)}}();const d=n;class h extends s{constructor(e,t,i="BrowserVideo"){super(),this._accountId=e,this._apiKey=t,this._eventType=i,this._eventBuffer=[],this._harvestLocked=!1,this._lastTimestamp=0,setInterval((()=>{this.harvestHandler(h.Source.TIMER)}),1e4)}send(e,t){if(super.send(e,t),this._eventBuffer.length<500){(t=this.generateAttributes(t)).eventType=this._eventType,t.actionName=e;let i=Date.now();i>this._lastTimestamp?(t.timestamp=i,this._lastTimestamp=i):(this._lastTimestamp++,t.timestamp=this._lastTimestamp),this._eventBuffer.push(t)}}generateAttributes(e){e.pageUrl=window.location.href,e.currentUrl=window.location.origin+window.location.pathname,e.referrerUrl=document.referrer;let t="Unknown";-1!=navigator.userAgent.indexOf("Win")?t="Windows":-1!=navigator.userAgent.indexOf("Android")?t="Android":-1!=navigator.userAgent.indexOf("Mac")?t="Mac":navigator.userAgent.match(/iPhone|iPad|iPod/i)?t="iOS":-1!=navigator.userAgent.indexOf("Linux")?t="Linux":-1!=navigator.userAgent.indexOf("X11")&&(t="UNIX"),e.userAgentOS=t;let i="Unknown";-1!=navigator.userAgent.indexOf("Chrome")?i="Chrome":-1!=navigator.userAgent.indexOf("Firefox")?i="Firefox":-1!=navigator.userAgent.indexOf("MSIE")?i="IE":-1!=navigator.userAgent.indexOf("Edge")?i="Microsoft Edge":-1!=navigator.userAgent.indexOf("Safari")?i="Safari":-1!=navigator.userAgent.indexOf("Opera")&&(i="Opera"),e.userAgentName=i;let s="Unknown";return s=navigator.userAgent.match(/Tablet|iPad/i)?"Tablet":navigator.userAgent.match(/Mobile|Windows Phone|Lumia|Android|webOS|iPhone|iPod|Blackberry|PlayBook|BB10|Opera Mini|\bCrMo\/|Opera Mobi/i)?"Mobile":null!=window.cast?"Cast":"Desktop",e.deviceType=s,e}harvestHandler(e){e==h.Source.TIMER&&this._harvestLocked?d.debug("Harvest still locked, abort"):(this._harvestLocked=!0,this._eventBuffer.length>0?(d.debug("Push events to Insights = ",this._eventBuffer),this.pushEventToInsights(this._eventBuffer.pop())):this._harvestLocked=!1)}pushEventToInsights(e){const t={method:"POST",headers:{"Content-Type":"application/json","X-Insert-Key":this._apiKey},body:JSON.stringify(e)},i="https://insights-collector.newrelic.com/v1/accounts/"+this._accountId+"/events";fetch(i,t).then((e=>e.json())).then((e=>this.insightsRequestResponse(e))).catch((t=>{d.error("Error:",t,e),this._eventBuffer.push(e),this._harvestLocked=!1}))}insightsRequestResponse(e){this.harvestHandler(h.Source.FETCH)}}h.Source={TIMER:"TIMER",FETCH:"FETCH"};const l=h;class u{static addTracker(e){e.on&&e.emit?(g.push(e),e.on("*",p),"function"==typeof e.trackerInit&&e.trackerInit()):d.error("Tried to load a non-tracker.",e)}static removeTracker(e){e.off("*",p),e.dispose();let t=g.indexOf(e);-1!==t&&g.splice(t,1)}static getTrackers(){return g}static getBackend(){return c}static setBackend(e){c=e}static send(e,t){null!=u.getBackend()&&u.getBackend()instanceof s?u.getBackend().send(e,t):"undefined"!=typeof newrelic&&newrelic.addPageAction?newrelic.addPageAction(e,t):f||(d.error("newrelic.addPageAction() is not available.","In order to use NewRelic Video you will need New Relic Browser Agent."),f=!0)}static sendError(e){u.send("ERROR",e)}}let c,g=[],f=!1;function p(e){let t=function(e){let t={};for(let i in e)null!==e[i]&&void 0!==e[i]&&(t[i]=e[i]);return t}(e.data);d.level<=d.Levels.DEBUG?d.notice("Sent",e.type,t):d.notice("Sent",e.type),u.send(e.type,t)}const T=u;class m{}m.AdPositions={PRE:"pre",MID:"mid",POST:"post"};const E=m;class S{constructor(){this.reset()}reset(){this.startTime=0,this.stopTime=0,this.offset=0}getDeltaTime(){return this.startTime?this.offset+((new Date).getTime()-this.startTime):null}start(){this.startTime=(new Date).getTime(),this.stopTime=0}stop(){return this.stopTime=(new Date).getTime(),this.getDeltaTime()}clone(){var e=new S;return e.startTime=this.startTime,e.stopTime=this.stopTime,e.offset=this.offset,e}}const A=S,y=class{on(e,t){if(this._listeners=this._listeners||{},"function"==typeof t)return this._listeners[e]=this._listeners[e]||[],this._listeners[e].push(t),this}off(e,t){if(this._listeners=this._listeners||{},this._listeners[e]){var i=this._listeners[e].indexOf(t);-1!==i&&this._listeners[e].splice(i,1)}return this}emit(e,t){return this._listeners=this._listeners||{},t=t||{},Array.isArray(this._listeners[e])&&this._listeners[e].forEach((i=>{i.call(this,{type:e,data:t,target:this})})),Array.isArray(this._listeners["*"])&&this._listeners["*"].forEach((i=>{i.call(this,{type:e,data:t,target:this})})),this}},R={rE:"0.32.2"};class k extends y{constructor(e){super(),this.customData={},this.heartbeat=null,this.parentTracker=null,this._trackerReadyChrono=new A,this._trackerReadyChrono.start(),e=e||{},this.setOptions(e)}setOptions(e){e&&(e.parentTracker&&(this.parentTracker=e.parentTracker),e.customData&&(this.customData=e.customData),e.heartbeat&&(this.heartbeat=e.heartbeat))}dispose(){this.unregisterListeners()}registerListeners(){}unregisterListeners(){}getHeartbeat(){return this.heartbeat?this.heartbeat:this.parentTracker&&this.parentTracker.heartbeat?this.parentTracker.heartbeat:3e4}startHeartbeat(){this._heartbeatInterval=setInterval(this.sendHeartbeat.bind(this),Math.max(this.getHeartbeat(),5e3))}stopHeartbeat(){this._heartbeatInterval&&clearInterval(this._heartbeatInterval)}sendHeartbeat(e){this.send(k.Events.HEARTBEAT,e)}getAttributes(e){(e=e||{}).trackerName=this.getTrackerName(),e.trackerVersion=this.getTrackerVersion(),e.coreVersion=R.rE,e.timeSinceTrackerReady=this._trackerReadyChrono.getDeltaTime();for(let t in this.customData)e[t]=this.customData[t];return null!=document.hidden&&(e.isBackgroundEvent=document.hidden),e}getTrackerVersion(){return R.rE}getTrackerName(){return"base-tracker"}send(e,t){this.emit(e,this.getAttributes(t))}}k.Events={HEARTBEAT:"HEARTBEAT"};const _=k,b=class{constructor(){this.reset(),this._createdAt=Date.now()}reset(){this._viewSession=null,this._viewCount=0,this._isAd=!1,this.numberOfErrors=0,this.numberOfAds=0,this.numberOfVideos=0,this.totalPlaytime=0,this.totalAdPlaytime=0,this.isAdBreak=!1,this.initialBufferingHappened=!1,this.resetFlags(),this.resetChronos()}resetFlags(){this.isPlayerReady=!1,this.isRequested=!1,this.isStarted=!1,this.isPaused=!1,this.isSeeking=!1,this.isBuffering=!1,this.isPlaying=!1}resetChronos(){this.timeSinceRequested=new A,this.timeSinceStarted=new A,this.timeSincePaused=new A,this.timeSinceSeekBegin=new A,this.timeSinceBufferBegin=new A,this.timeSinceAdBreakStart=new A,this.timeSinceLastDownload=new A,this.timeSinceLastHeartbeat=new A,this.timeSinceLastRenditionChange=new A,this.timeSinceLastAdQuartile=new A,this.timeSinceLastAd=new A,this.timeSinceResumed=new A,this.timeSinceSeekEnd=new A,this.playtimeSinceLastEvent=new A,this.customTimeSinceAttributes={}}isAd(){return this._isAd}setIsAd(e){this._isAd=e}setTimeSinceAttribute(e){this.customTimeSinceAttributes[e]=new A,this.customTimeSinceAttributes[e].start()}removeTimeSinceAttribute(e){delete this.customTimeSinceAttributes[e]}getViewSession(){if(!this._viewSession){let e=(new Date).getTime(),t=Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2);this._viewSession=e+"-"+t}return this._viewSession}getViewId(){return this.getViewSession()+"-"+this._viewCount}getStateAttributes(e){e=e||{},this.isAd()?(this.isRequested&&(e.timeSinceAdRequested=this.timeSinceRequested.getDeltaTime(),e.timeSinceLastAdHeartbeat=this.timeSinceLastHeartbeat.getDeltaTime()),this.isStarted&&(e.timeSinceAdStarted=this.timeSinceStarted.getDeltaTime()),this.isPaused&&(e.timeSinceAdPaused=this.timeSincePaused.getDeltaTime()),this.isBuffering&&(e.timeSinceAdBufferBegin=this.timeSinceBufferBegin.getDeltaTime()),this.isSeeking&&(e.timeSinceAdSeekBegin=this.timeSinceSeekBegin.getDeltaTime()),this.isAdBreak&&(e.timeSinceAdBreakBegin=this.timeSinceAdBreakStart.getDeltaTime()),e.numberOfAds=this.numberOfAds):(this.isRequested&&(e.timeSinceRequested=this.timeSinceRequested.getDeltaTime(),e.timeSinceLastHeartbeat=this.timeSinceLastHeartbeat.getDeltaTime()),this.isStarted&&(e.timeSinceStarted=this.timeSinceStarted.getDeltaTime()),this.isPaused&&(e.timeSincePaused=this.timeSincePaused.getDeltaTime()),this.isBuffering&&(e.timeSinceBufferBegin=this.timeSinceBufferBegin.getDeltaTime()),this.isSeeking&&(e.timeSinceSeekBegin=this.timeSinceSeekBegin.getDeltaTime()),e.timeSinceLastAd=this.timeSinceLastAd.getDeltaTime(),e.numberOfVideos=this.numberOfVideos),e.numberOfErrors=this.numberOfErrors,this.isAd()||(this.playtimeSinceLastEvent.startTime>0?e.playtimeSinceLastEvent=this.playtimeSinceLastEvent.getDeltaTime():e.playtimeSinceLastEvent=0,this.isPlaying?this.playtimeSinceLastEvent.start():this.playtimeSinceLastEvent.reset(),this.totalPlaytime+=e.playtimeSinceLastEvent,e.totalPlaytime=this.totalPlaytime);for(const[t,i]of Object.entries(this.customTimeSinceAttributes))e[t]=i.getDeltaTime();return e}calculateBufferType(e){let t="";return t=e?"initial":this.isSeeking?"seek":this.isPaused?"pause":"connection",d.debug("Buffer Type = "+t),t}goViewCountUp(){this._viewCount++}goPlayerReady(){return!this.isPlayerReady&&(this.isPlayerReady=!0,!0)}goRequest(){return!this.isRequested&&(this.isRequested=!0,this.timeSinceLastAd.reset(),this.timeSinceRequested.start(),!0)}goStart(){return!(!this.isRequested||this.isStarted||(this.isAd()?this.numberOfAds++:this.numberOfVideos++,this.isStarted=!0,this.isPlaying=!0,this.timeSinceStarted.start(),this.playtimeSinceLastEvent.start(),0))}goEnd(){return!!this.isRequested&&(this.numberOfErrors=0,this.resetFlags(),this.timeSinceRequested.stop(),this.timeSinceStarted.stop(),this.playtimeSinceLastEvent.stop(),!0)}goPause(){return!(!this.isStarted||this.isPaused||(this.isPaused=!0,this.isPlaying=!1,this.timeSincePaused.start(),this.playtimeSinceLastEvent.stop(),this.timeSinceResumed.reset(),0))}goResume(){return!(!this.isStarted||!this.isPaused||(this.isPaused=!1,this.isPlaying=!0,this.timeSincePaused.stop(),this.timeSinceResumed.start(),0))}goBufferStart(){return!(!this.isRequested||this.isBuffering||(this.isBuffering=!0,this.isPlaying=!1,this.timeSinceBufferBegin.start(),0))}goBufferEnd(){return!(!this.isRequested||!this.isBuffering||(this.isBuffering=!1,this.isPlaying=!0,this.timeSinceBufferBegin.stop(),0))}goSeekStart(){return!(!this.isStarted||this.isSeeking||(this.isSeeking=!0,this.isPlaying=!1,this.timeSinceSeekBegin.start(),this.timeSinceSeekEnd.reset(),0))}goSeekEnd(){return!(!this.isStarted||!this.isSeeking||(this.isSeeking=!1,this.isPlaying=!0,this.timeSinceSeekBegin.stop(),this.timeSinceSeekEnd.start(),0))}goAdBreakStart(){return!this.isAdBreak&&(this.isAdBreak=!0,this.timeSinceAdBreakStart.start(),!0)}goAdBreakEnd(){return!!this.isAdBreak&&(this.isRequested=!1,this.isAdBreak=!1,this.totalAdPlaytime=this.timeSinceAdBreakStart.getDeltaTime(),this.timeSinceAdBreakStart.stop(),!0)}goDownload(){this.timeSinceLastDownload.start()}goHeartbeat(){this.timeSinceLastHeartbeat.start()}goRenditionChange(){this.timeSinceLastRenditionChange.start()}goAdQuartile(){this.timeSinceLastAdQuartile.start()}goError(){this.numberOfErrors++}goLastAd(){this.timeSinceLastAd.start()}};class v extends _{constructor(e,t){super(),this.state=new b,this.adsTracker=null,this._lastBufferType=null,t=t||{},this.setOptions(t),e&&this.setPlayer(e,t.tag),d.notice("Tracker "+this.getTrackerName()+" v"+this.getTrackerVersion()+" is ready.")}setOptions(e){e&&(e.adsTracker&&this.setAdsTracker(e.adsTracker),"boolean"==typeof e.isAd&&this.setIsAd(e.isAd),_.prototype.setOptions.apply(this,arguments))}setPlayer(e,t){(this.player||this.tag)&&this.dispose(),"undefined"!=typeof document&&document.getElementById&&("string"==typeof e&&(e=document.getElementById(e)),"string"==typeof t&&(t=document.getElementById(t))),t=t||e,this.player=e,this.tag=t,this.registerListeners()}isAd(){return this.state.isAd()}setIsAd(e){this.state.setIsAd(e)}setAdsTracker(e){this.disposeAdsTracker(),e&&(this.adsTracker=e,this.adsTracker.setIsAd(!0),this.adsTracker.parentTracker=this,this.adsTracker.on("*",D.bind(this)))}disposeAdsTracker(){this.adsTracker&&(this.adsTracker.off("*",D),this.adsTracker.dispose())}dispose(){this.stopHeartbeat(),this.disposeAdsTracker(),this.unregisterListeners(),this.player=null,this.tag=null}registerListeners(){}unregisterListeners(){}getViewId(){return this.parentTracker?this.parentTracker.getViewId():this.state.getViewId()}getViewSession(){return this.parentTracker?this.parentTracker.getViewSession():this.state.getViewSession()}getVideoId(){return null}getTitle(){return null}isLive(){return null}getBitrate(){return null}getWebkitBitrate(){if(this.tag&&this.tag.webkitVideoDecodedByteCount){let e;if(this._lastWebkitBitrate){e=this.tag.webkitVideoDecodedByteCount;let t=e-this._lastWebkitBitrate,i=this.getHeartbeat()/1e3;e=Math.round(t/i*8)}return this._lastWebkitBitrate=this.tag.webkitVideoDecodedByteCount,e||null}}getRenditionName(){return null}getRenditionBitrate(){return null}getRenditionShift(e){let t,i=this.getRenditionBitrate();return this.isAd()?(t=this._lastAdRendition,e&&(this._lastAdRendition=i)):(t=this._lastRendition,e&&(this._lastRendition=i)),i&&t?i>t?"up":i<t?"down":null:null}getRenditionHeight(){return this.tag?this.tag.videoHeight:null}getRenditionWidth(){return this.tag?this.tag.videoWidth:null}getDuration(){return this.tag?this.tag.duration:null}getPlayhead(){return this.tag?this.tag.currentTime:null}getLanguage(){return null}getSrc(){return this.tag?this.tag.currentSrc:null}getPlayrate(){return this.tag?this.tag.playbackRate:null}isMuted(){return this.tag?this.tag.muted:null}isFullscreen(){return null}getCdn(){return null}getPlayerName(){return this.getTrackerName()}getPlayerVersion(){return null}getFps(){return null}isAutoplayed(){return this.tag?this.tag.autoplay:null}getPreload(){return this.tag?this.tag.preload:null}getAdQuartile(){return null}getAdPosition(){return this.parentTracker?this.parentTracker.state.isStarted?"mid":"pre":null}getAdPartner(){return null}getAdCreativeId(){return null}getAttributes(e){void 0===(e=_.prototype.getAttributes.apply(this,arguments)).isAd&&(e.isAd=this.isAd()),e.viewSession=this.getViewSession(),e.viewId=this.getViewId(),e.playerName=this.getPlayerName(),e.playerVersion=this.getPlayerVersion();try{e.pageUrl=window.location.href}catch(e){}this.isAd()?(e.adId=this.getVideoId(),e.adTitle=this.getTitle(),e.adBitrate=this.getBitrate()||this.getWebkitBitrate(),e.adRenditionName=this.getRenditionName(),e.adRenditionBitrate=this.getRenditionBitrate(),e.adRenditionHeight=this.getRenditionHeight(),e.adRenditionWidth=this.getRenditionWidth(),e.adDuration=this.getDuration(),e.adPlayhead=this.getPlayhead(),e.adLanguage=this.getLanguage(),e.adSrc=this.getSrc(),e.adCdn=this.getCdn(),e.adIsMuted=this.isMuted(),e.adFps=this.getFps(),e.adQuartile=this.getAdQuartile(),e.adPosition=this.getAdPosition(),e.adCreativeId=this.getAdCreativeId(),e.adPartner=this.getAdPartner()):(e.contentId=this.getVideoId(),e.contentTitle=this.getTitle(),e.contentIsLive=this.isLive(),e.contentBitrate=this.getBitrate()||this.getWebkitBitrate(),e.contentRenditionName=this.getRenditionName(),e.contentRenditionBitrate=this.getRenditionBitrate(),e.contentRenditionHeight=this.getRenditionHeight(),e.contentRenditionWidth=this.getRenditionWidth(),e.contentDuration=this.getDuration(),e.contentPlayhead=this.getPlayhead(),e.contentLanguage=this.getLanguage(),e.contentSrc=this.getSrc(),e.contentPlayrate=this.getPlayrate(),e.contentIsFullscreen=this.isFullscreen(),e.contentIsMuted=this.isMuted(),e.contentCdn=this.getCdn(),e.contentIsAutoplayed=this.isAutoplayed(),e.contentPreload=this.getPreload(),e.contentFps=this.getFps(),null!=this.adsTracker&&this.adsTracker.state.totalAdPlaytime>0&&(e.totalAdPlaytime=this.adsTracker.state.totalAdPlaytime)),this.state.getStateAttributes(e);for(let t in this.customData)e[t]=this.customData[t];return e}sendCustom(e,t,i){i=i||{},this.send(e,i),this.state.setTimeSinceAttribute(t)}sendPlayerReady(e){this.state.goPlayerReady()&&(e=e||{},this.send(v.Events.PLAYER_READY,e))}sendRequest(e){if(this.state.goRequest()){this.state.goViewCountUp();let t=this.isAd()?v.Events.AD_REQUEST:v.Events.CONTENT_REQUEST;this.send(t,e),this.startHeartbeat(),this.state.goHeartbeat()}}sendStart(e){if(this.state.goStart()){let t;this.isAd()?(t=v.Events.AD_START,this.parentTracker&&(this.parentTracker.state.isPlaying=!1)):t=v.Events.CONTENT_START,this.send(t,e)}}sendEnd(e){if(this.state.goEnd()){let t;e=e||{},this.isAd()?(t=v.Events.AD_END,e.timeSinceAdRequested=this.state.timeSinceRequested.getDeltaTime(),e.timeSinceAdStarted=this.state.timeSinceStarted.getDeltaTime(),this.parentTracker&&(this.parentTracker.state.isPlaying=!0)):(t=v.Events.CONTENT_END,e.timeSinceRequested=this.state.timeSinceRequested.getDeltaTime(),e.timeSinceStarted=this.state.timeSinceStarted.getDeltaTime()),this.stopHeartbeat(),this.send(t,e),this.parentTracker&&this.isAd()&&this.parentTracker.state.goLastAd(),this.state.goViewCountUp(),this.state.totalPlaytime=0}}sendPause(e){if(this.state.goPause()){let t=this.isAd()?v.Events.AD_PAUSE:v.Events.CONTENT_PAUSE;this.send(t,e)}}sendResume(e){if(this.state.goResume()){let t;e=e||{},this.isAd()?(t=v.Events.AD_RESUME,e.timeSinceAdPaused=this.state.timeSincePaused.getDeltaTime()):(t=v.Events.CONTENT_RESUME,e.timeSincePaused=this.state.timeSincePaused.getDeltaTime()),this.send(t,e)}}sendBufferStart(e){if(this.state.goBufferStart()){let t;e=e||{},t=this.isAd()?v.Events.AD_BUFFER_START:v.Events.CONTENT_BUFFER_START,e=this.buildBufferAttributes(e),this._lastBufferType=e.bufferType,this.send(t,e)}}sendBufferEnd(e){if(this.state.goBufferEnd()){let t;e=e||{},this.isAd()?(t=v.Events.AD_BUFFER_END,e.timeSinceAdBufferBegin=this.state.timeSinceBufferBegin.getDeltaTime()):(t=v.Events.CONTENT_BUFFER_END,e.timeSinceBufferBegin=this.state.timeSinceBufferBegin.getDeltaTime()),e=this.buildBufferAttributes(e),null!=this._lastBufferType&&(e.bufferType=this._lastBufferType),this.send(t,e),this.state.initialBufferingHappened=!0}}buildBufferAttributes(e){return null==e.timeSinceStarted||e.timeSinceStarted<100?e.isInitialBuffering=!this.state.initialBufferingHappened:e.isInitialBuffering=!1,e.bufferType=this.state.calculateBufferType(e.isInitialBuffering),e.timeSinceResumed=this.state.timeSinceResumed.getDeltaTime(),e.timeSinceSeekEnd=this.state.timeSinceSeekEnd.getDeltaTime(),e}sendSeekStart(e){if(this.state.goSeekStart()){let t;t=this.isAd()?v.Events.AD_SEEK_START:v.Events.CONTENT_SEEK_START,this.send(t,e)}}sendSeekEnd(e){if(this.state.goSeekEnd()){let t;e=e||{},this.isAd()?(t=v.Events.AD_SEEK_END,e.timeSinceAdSeekBegin=this.state.timeSinceSeekBegin.getDeltaTime()):(t=v.Events.CONTENT_SEEK_END,e.timeSinceSeekBegin=this.state.timeSinceSeekBegin.getDeltaTime()),this.send(t,e)}}sendDownload(e){(e=e||{}).state||d.warn("Called sendDownload without { state: xxxxx }."),this.send(v.Events.DOWNLOAD,e),this.state.goDownload()}sendError(e){(e=e||{}).isAd=!0,this.state.goError();let t=this.isAd()?v.Events.AD_ERROR:v.Events.CONTENT_ERROR;this.send(t,e)}sendRenditionChanged(e){let t;(e=e||{}).timeSinceLastRenditionChange=this.state.timeSinceLastRenditionChange.getDeltaTime(),e.shift=this.getRenditionShift(!0),t=this.isAd()?v.Events.AD_RENDITION_CHANGE:v.Events.CONTENT_RENDITION_CHANGE,this.send(t,e),this.state.goRenditionChange()}sendHeartbeat(e){if(this.state.isRequested){let t;t=this.isAd()?v.Events.AD_HEARTBEAT:v.Events.CONTENT_HEARTBEAT,this.send(t,e),this.state.goHeartbeat()}}sendAdBreakStart(e){this.isAd()&&this.state.goAdBreakStart()&&(this.state.totalAdPlaytime=0,this.parentTracker&&(this.parentTracker.state.isPlaying=!1),this.send(v.Events.AD_BREAK_START,e))}sendAdBreakEnd(e){this.isAd()&&this.state.goAdBreakEnd()&&((e=e||{}).timeSinceAdBreakBegin=this.state.timeSinceAdBreakStart.getDeltaTime(),this.send(v.Events.AD_BREAK_END,e),this.parentTracker&&(this.parentTracker.state.isPlaying=!0),this.stopHeartbeat(),this.parentTracker&&this.isAd()&&this.parentTracker.state.goLastAd())}sendAdQuartile(e){this.isAd()&&((e=e||{}).quartile||d.warn("Called sendAdQuartile without { quartile: xxxxx }."),e.timeSinceLastAdQuartile=this.state.timeSinceLastAdQuartile.getDeltaTime(),this.send(v.Events.AD_QUARTILE,e),this.state.goAdQuartile())}sendAdClick(e){this.isAd()&&((e=e||{}).url||d.warn("Called sendAdClick without { url: xxxxx }."),this.send(v.Events.AD_CLICK,e))}}function D(e){this.send(e.type,e.data)}v.Events={PLAYER_READY:"PLAYER_READY",DOWNLOAD:"DOWNLOAD",ERROR:"ERROR",CONTENT_REQUEST:"CONTENT_REQUEST",CONTENT_START:"CONTENT_START",CONTENT_END:"CONTENT_END",CONTENT_PAUSE:"CONTENT_PAUSE",CONTENT_RESUME:"CONTENT_RESUME",CONTENT_SEEK_START:"CONTENT_SEEK_START",CONTENT_SEEK_END:"CONTENT_SEEK_END",CONTENT_BUFFER_START:"CONTENT_BUFFER_START",CONTENT_BUFFER_END:"CONTENT_BUFFER_END",CONTENT_HEARTBEAT:"CONTENT_HEARTBEAT",CONTENT_RENDITION_CHANGE:"CONTENT_RENDITION_CHANGE",CONTENT_ERROR:"CONTENT_ERROR",AD_REQUEST:"AD_REQUEST",AD_START:"AD_START",AD_END:"AD_END",AD_PAUSE:"AD_PAUSE",AD_RESUME:"AD_RESUME",AD_SEEK_START:"AD_SEEK_START",AD_SEEK_END:"AD_SEEK_END",AD_BUFFER_START:"AD_BUFFER_START",AD_BUFFER_END:"AD_BUFFER_END",AD_HEARTBEAT:"AD_HEARTBEAT",AD_RENDITION_CHANGE:"AD_RENDITION_CHANGE",AD_ERROR:"AD_ERROR",AD_BREAK_START:"AD_BREAK_START",AD_BREAK_END:"AD_BREAK_END",AD_QUARTILE:"AD_QUARTILE",AD_CLICK:"AD_CLICK"};const B=v},330:e=>{e.exports=JSON.parse('{"name":"newrelic-video-dash","version":"0.1.0","description":"New relic tracker for dash player","main":"src/index.js","scripts":{"test":"jest --coverage","build":"webpack --mode production","build:dev":"webpack --mode development","watch":"webpack  --progress --color --watch","watch:dev":"webpack --progress --color --watch --mode development","prezip":"npm run build","zip":"zip -P newrelic -x \'*.DS_Store\' -r dash.zip dist samples README.md CHANGELOG.md EULA.md","clean":"rm -rf dist *.zip"},"repository":{"type":"git","url":"https://github.com/newrelic/video-dash-js"},"author":"Malay Chandan","license":"MIT","dependencies":{"newrelic-video-core":"git+https://github.com/newrelic/video-core-js.git"},"devDependencies":{"@babel/cli":"^7.25.6","@babel/core":"^7.25.2","@babel/node":"^7.25.0","@babel/plugin-transform-modules-commonjs":"^7.24.8","@babel/preset-env":"^7.25.4","@babel/register":"^7.24.6","babel-jest":"^29.7.0","babel-loader":"^9.1.3","jest":"^29.7.0","webpack":"^5.94.0","webpack-cli":"^5.1.4"}}')}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,i),a.exports}return i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i(954)})()));
//# sourceMappingURL=newrelic-video-dash.min.js.map